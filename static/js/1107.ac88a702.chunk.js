"use strict";(self.webpackChunkapp_frontend=self.webpackChunkapp_frontend||[]).push([[1107],{6891:function(n,e,r){r.d(e,{Z:function(){return x}});var t=r(70885),a=r(15861),i=r(15671),o=r(43144),l=r(87757),u=r.n(l),s=r(99811),c=r.n(s),d=r(10499),m=r(63922),f=r(71351),p=r(81384),b=r(31881),h=r.n(b),x=function(){function n(){(0,i.Z)(this,n)}return(0,o.Z)(n,null,[{key:"validate",value:function(n,e){if(e){if(e.image&&!n.type.startsWith("image"))throw new Error((0,d.ag)("fileUploader.image"));if(e.storage.maxSizeInBytes&&n.size>e.storage.maxSizeInBytes)throw new Error((0,d.ag)("fileUploader.size",c()(e.storage.maxSizeInBytes)));var r=g(n.name);if(e.formats&&!e.formats.includes(r))throw new Error((0,d.ag)("fileUploader.formats",e.formats.join(", ")))}}},{key:"upload",value:function(){var n=(0,a.Z)(u().mark((function n(e,r){var t,a,i,o,l,s,c;return u().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:n.prev=0,this.validate(e,r),n.next=7;break;case 4:return n.prev=4,n.t0=n.catch(0),n.abrupt("return",Promise.reject(n.t0));case 7:return t=g(e.name),a=(0,f.Z)(),i="".concat(a,".").concat(t),n.next=12,this.fetchFileCredentials(i,r);case 12:return o=n.sent,l=o.uploadCredentials,s=o.downloadUrl,c=o.privateUrl,n.next=18,this.uploadToServer(e,l);case 18:return n.abrupt("return",{id:a,name:e.name,sizeInBytes:e.size,publicUrl:l&&l.publicUrl?l.publicUrl:null,privateUrl:c,downloadUrl:s,new:!0});case 19:case"end":return n.stop()}}),n,this,[[0,4]])})));return function(e,r){return n.apply(this,arguments)}}()},{key:"fetchFileCredentials",value:function(){var n=(0,a.Z)(u().mark((function n(e,r){var t,a,i;return u().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return t=p.Z.get(),n.next=3,m.Z.get("/tenant/".concat(t,"/file/credentials"),{params:{filename:e,storageId:r.storage.id}});case 3:return a=n.sent,i=a.data,n.abrupt("return",i);case 6:case"end":return n.stop()}}),n)})));return function(e,r){return n.apply(this,arguments)}}()},{key:"uploadToServer",value:function(){var n=(0,a.Z)(u().mark((function n(e,r){var a,i,o,l,s,c,d;return u().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:for(n.prev=0,a=r.url,i=new FormData,o=0,l=Object.entries(r.fields||{});o<l.length;o++)s=(0,t.Z)(l[o],2),c=s[0],d=s[1],i.append(c,d);return i.append("file",e),n.abrupt("return",h().post(a,i,{headers:{"Content-Type":"multipart/form-data"}}));case 8:throw n.prev=8,n.t0=n.catch(0),console.error(n.t0),n.t0;case 12:case"end":return n.stop()}}),n,null,[[0,8]])})));return function(e,r){return n.apply(this,arguments)}}()}]),n}();function g(n){if(!n)return null;var e=/(?:\.([^.]+))?$/.exec(n);return e?e[1]:null}},89994:function(n,e,r){var t=r(42982),a=r(42277),i=r(10499),o=r(70816),l=r.n(o),u={generic:function(n){return a.nK().label(n)},string:function(n,e){e=e||{};var r=a.Z_().transform((function(n,e){return""===e?null:n})).nullable(!0).trim().label(n);return e.required&&(r=r.required()),(e.min||0===e.min)&&(r=r.min(e.min)),e.max&&(r=r.max(e.max)),e.matches&&(r=r.matches(e.matches)),r},boolean:function(n,e){return a.Xg().default(!1).label(n)},relationToOne:function(n,e){e=e||{};var r=a.nK().nullable(!0).label(n).transform((function(n,e){return e?e.id:null}));return e.required&&(r=r.required()),r},stringArray:function(n,e){e=e||{};var r=a.IX().compact().ensure().of(a.Z_().transform((function(n,e){return""===e?null:n})).trim()).label(n);return(e.required||e.min)&&(r=r.required()),e.min||0===e.min?r=r.min(e.min):e.required&&(r=r.min(1)),e.max&&(r=r.max(e.max)),r},relationToMany:function(n,e){e=e||{};var r=a.IX().nullable(!0).label(n).transform((function(n,e){return e&&e.length?e.map((function(n){return n.id})):[]}));return(e.required||e.min)&&(r=r.required()),e.min||0===e.min?r=r.min(e.min):e.required&&(r=r.min(1)),e.max&&(r=r.max(e.max)),r},integer:function(n,e){e=e||{};var r=a.Rx().transform((function(n,e){return""===e?null:n})).integer().nullable(!0).label(n);return e.required&&(r=r.required()),(e.min||0===e.min)&&(r=r.min(e.min)),e.max&&(r=r.max(e.max)),r},images:function(n,e){e=e||{};var r=a.IX().nullable(!0).label(n);return(e.required||e.min)&&(r=r.required()),e.min||0===e.min?r=r.min(e.min):e.required&&(r=r.min(1)),e.max&&(r=r.max(e.max)),r},files:function(n,e){e=e||{};var r=a.IX().compact().ensure().nullable(!0).label(n);return(e.required||e.min)&&(r=r.required()),e.min||0===e.min?r=r.min(e.min):e.required&&(r=r.min(1)),e.max&&(r=r.max(e.max)),r},enumerator:function(n,e){e=e||{};var r=a.Z_().transform((function(n,e){return""===e?null:n})).label(n).nullable(!0).oneOf([null].concat((0,t.Z)(e.options||[])));return e.required&&(r=r.required((0,i.ag)("validation.string.selected"))),r},email:function(n,e){e=e||{};var r=a.Z_().transform((function(n,e){return""===e?null:n})).nullable(!0).trim().label(n).email();return e.required&&(r=r.required()),(e.min||0===e.min)&&(r=r.min(e.min)),e.max&&(r=r.max(e.max)),e.matches&&(r=r.matches(e.matches)),r},decimal:function(n,e){e=e||{};var r=a.Rx().transform((function(n,e){return""===e?null:n})).nullable(!0).label(n);return e.required&&(r=r.required()),(e.min||0===e.min)&&(r=r.min(e.min)),e.max&&(r=r.max(e.max)),r},datetime:function(n,e){e=e||{};var r=a.nK().nullable(!0).label(n).transform((function(n,e){return n?l()(e,"YYYY-MM-DD HH:mm").toISOString():null}));return e.required&&(r=r.required()),r},date:function(n,e){e=e||{};var r=a.nK().nullable(!0).label(n).test("is-date",(0,i.ag)("validation.mixed.default"),(function(n){return!n||l()(n,"YYYY-MM-DD").isValid()})).transform((function(n){return n?l()(n).format("YYYY-MM-DD"):null}));return e.required&&(r=r.required()),r}};e.Z=u},49384:function(n,e,r){r.d(e,{Z:function(){return i}});var t=r(15671),a=r(43144),i=function(){function n(){(0,t.Z)(this,n)}return(0,a.Z)(n,null,[{key:"errorMessage",value:function(n,e,r,t){var a,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null;if(i)return i;if(!t&&!r[n])return null;var o=e[n];return(null===o||void 0===o||null===(a=o[0])||void 0===a?void 0:a.message)||(null===o||void 0===o?void 0:o.message)||o||null}}]),n}()},85543:function(n,e,r){var t=r(47313),a=r(89722),i=r(43270),o=r(49384),l=r(46417);function u(n){var e=n.label,r=n.name,u=n.hint,s=n.storage,c=n.max,d=n.required,m=n.externalErrorMessage,f=(0,i.Gc)(),p=f.errors,b=f.formState,h=b.touched,x=b.isSubmitted,g=f.setValue,v=f.watch,y=f.register;(0,t.useEffect)((function(){y({name:r})}),[y,r]);var w=o.Z.errorMessage(r,p,h,x,m);return(0,l.jsxs)("div",{className:"form-group",children:[Boolean(e)&&(0,l.jsx)("label",{className:"col-form-label ".concat(d?"required":null),htmlFor:r,children:e}),(0,l.jsx)("br",{}),(0,l.jsx)(a.Z,{storage:s,value:v(r),onChange:function(e){g(r,e,{shouldValidate:!0,shouldDirty:!0}),n.onChange&&n.onChange(e)},max:c}),(0,l.jsx)("div",{className:"invalid-feedback",children:w}),Boolean(u)&&(0,l.jsx)("small",{className:"form-text text-muted",children:u})]})}u.defaultProps={max:void 0,required:!1},e.Z=u},68160:function(n,e,r){var t,a=r(30168),i=r(91876).ZP.div(t||(t=(0,a.Z)(["\n  padding-top: 0;\n  padding-bottom: 0;\n\n  label.required::before {\n    display: inline-block;\n    margin-right: 4px;\n    content: '*';\n    line-height: 1;\n    font-size: 13px;\n    color: #f5222d;\n  }\n  .app__specification {\n    padding: 14px;\n  }\n  .react-datepicker-wrapper {\n    width: 100%;\n  }\n  i {\n    padding-right: 4px;\n    font-size: 14px;\n  }\n  .adherent-control {\n    z-index: 0;\n  }\n\n  .invalid-feedback {\n    display: block;\n  }\n\n  .form-buttons {\n    padding-top: 16px;\n\n    .btn {\n      margin-right: 8px;\n      margin-bottom: 8px;\n    }\n  }\n"])));e.Z=i},89722:function(n,e,r){r.d(e,{Z:function(){return w}});var t,a,i=r(42982),o=r(15861),l=r(70885),u=r(87757),s=r.n(u),c=r(47313),d=r(6891),m=r(33512),f=r(10499),p=r(30168),b=r(91876),h=b.ZP.div(t||(t=(0,p.Z)(["\n  .img-card:hover .img-buttons {\n    display: block;\n  }\n\n  .img-buttons {\n    display: none;\n    position: relative;\n    bottom: 2.1rem;\n    width: calc(100px);\n    text-align: center;\n    background-color: rgba(0, 0, 0, 0.5);\n  }\n\n  .img-buttons * {\n    color: white;\n  }\n"]))),x=r(46417),g=b.ZP.div(a||(a=(0,p.Z)(["\n  /* The Modal (background) */\n  .modal {\n    display: block;\n    position: fixed; /* Stay in place */\n    z-index: 9999; /* Sit on top */\n    padding-top: 100px; /* Location of the box */\n    left: 0;\n    top: 0;\n    width: 100%; /* Full width */\n    height: 100%; /* Full height */\n    overflow: auto; /* Enable scroll if needed */\n    background-color: rgb(0, 0, 0); /* Fallback color */\n    background-color: rgba(\n      0,\n      0,\n      0,\n      0.9\n    ); /* Black w/ opacity */\n  }\n\n  /* Modal Content (Image) */\n  .modal-content {\n    margin: auto;\n    display: block;\n    width: 80%;\n    max-width: 700px;\n  }\n\n  /* Caption of Modal Image (Image Text) - Same Width as the Image */\n  #caption {\n    margin: auto;\n    display: block;\n    width: 80%;\n    max-width: 700px;\n    text-align: center;\n    color: #ccc;\n    padding: 10px 0;\n    height: 150px;\n  }\n\n  /* Add Animation - Zoom in the Modal */\n  .modal-content,\n  #caption {\n    animation-name: zoom;\n    animation-duration: 0.6s;\n  }\n\n  @keyframes zoom {\n    from {\n      transform: scale(0);\n    }\n    to {\n      transform: scale(1);\n    }\n  }\n\n  /* The Close Button */\n  .close {\n    position: absolute;\n    top: 15px;\n    right: 35px;\n    color: #f1f1f1;\n    font-size: 40px;\n    font-weight: bold;\n    transition: 0.3s;\n  }\n\n  .close:hover,\n  .close:focus {\n    color: #bbb;\n    text-decoration: none;\n    cursor: pointer;\n  }\n\n  /* 100% Image Width on Smaller Screens */\n  @media only screen and (max-width: 700px) {\n    .modal-content {\n      width: 100%;\n    }\n  }\n"])));var v=function(n){return(0,x.jsx)(g,{children:(0,x.jsxs)("div",{className:"modal",children:[(0,x.jsx)("span",{className:"close",onClick:n.onClose,children:"\xd7"}),(0,x.jsx)("img",{className:"modal-content",src:n.src,alt:n.alt})]})})},y=r(95748);var w=function(n){var e=(0,c.useState)(!1),r=(0,l.Z)(e,2),t=r[0],a=r[1],u=(0,c.useState)(null),p=(0,l.Z)(u,2),b=p[0],g=p[1],w=(0,c.useRef)(),Z=function(){var e=n.value;return e?Array.isArray(e)?e:[e]:[]},k=function(){var e=(0,o.Z)(s().mark((function e(r){var t,o;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,(t=r.target.files)&&t.length){e.next=4;break}return e.abrupt("return");case 4:return o=t[0],d.Z.validate(o,{storage:n.storage,image:!0}),a(!0),e.next=9,d.Z.upload(o,{storage:n.storage,image:!0});case 9:o=e.sent,w.current.value="",a(!1),n.onChange([].concat((0,i.Z)(Z()),[o])),e.next=21;break;case 15:e.prev=15,e.t0=e.catch(0),w.current.value="",console.error(e.t0),a(!1),m.Z.showMessage(e.t0);case 21:case"end":return e.stop()}}),e,null,[[0,15]])})));return function(n){return e.apply(this,arguments)}}(),j=n.max,q=n.readonly,B=(0,x.jsxs)("label",{className:"btn btn-outline-secondary px-4 mb-2",style:{cursor:"pointer"},children:[(0,x.jsx)(y.Z,{loading:t,iconClass:"fas fa-plus"}),(0,f.ag)("fileUploader.upload"),(0,x.jsx)("input",{style:{display:"none"},disabled:t||q,accept:"image/*",type:"file",onChange:k,ref:w})]});return(0,x.jsxs)(h,{children:[q||j&&Z().map((function(n){return{uid:n.id||void 0,name:n.name,status:"done",url:n.downloadUrl}})).length>=j?null:B,Z()&&Z().length?(0,x.jsx)("div",{className:"d-flex flex-row flex-wrap",children:Z().map((function(e){return(0,x.jsxs)("div",{className:"mr-2 mb-2 img-card",style:{height:"100px"},children:[(0,x.jsx)("img",{alt:e.name,src:e.downloadUrl,className:"img-thumbnail",style:{width:"100px",height:"100px",objectFit:"cover"}}),(0,x.jsxs)("div",{className:"img-buttons rounded-bottom",children:[(0,x.jsx)("button",{type:"button",className:"btn btn-link",onClick:function(){return function(n){g({src:n.downloadUrl,alt:n.name})}(e)},children:(0,x.jsx)("i",{className:"fas fa-search"})}),!q&&(0,x.jsx)("button",{type:"button",className:"btn btn-link ml-2",onClick:function(){return r=e.id,void n.onChange(Z().filter((function(n){return n.id!==r})));var r},children:(0,x.jsx)("i",{className:"fas fa-times"})})]})]},e.id)}))}):null,b&&(0,x.jsx)(v,{src:b.src,alt:b.alt,onClose:function(){g(null)}})]})}},99811:function(n,e,r){!function(e){var r=/^(b|B)$/,t={iec:{bits:["b","Kib","Mib","Gib","Tib","Pib","Eib","Zib","Yib"],bytes:["B","KiB","MiB","GiB","TiB","PiB","EiB","ZiB","YiB"]},jedec:{bits:["b","Kb","Mb","Gb","Tb","Pb","Eb","Zb","Yb"],bytes:["B","KB","MB","GB","TB","PB","EB","ZB","YB"]}},a={iec:["","kibi","mebi","gibi","tebi","pebi","exbi","zebi","yobi"],jedec:["","kilo","mega","giga","tera","peta","exa","zetta","yotta"]};function i(n){var e,i,o,l,u,s,c,d,m,f,p,b,h,x,g,v=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},y=[],w=0,Z=void 0,k=void 0;if(isNaN(n))throw new TypeError("Invalid number");return i=!0===v.bits,p=!0===v.unix,e=v.base||2,f=void 0!==v.round?v.round:p?1:2,s=void 0!==v.locale?v.locale:"",c=v.localeOptions||{},b=void 0!==v.separator?v.separator:"",h=void 0!==v.spacer?v.spacer:p?"":" ",g=v.symbols||{},x=2===e&&v.standard||"jedec",m=v.output||"string",l=!0===v.fullform,u=v.fullforms instanceof Array?v.fullforms:[],Z=void 0!==v.exponent?v.exponent:-1,o=2<e?1e3:1024,(d=(k=Number(n))<0)&&(k=-k),(-1===Z||isNaN(Z))&&(Z=Math.floor(Math.log(k)/Math.log(o)))<0&&(Z=0),8<Z&&(Z=8),"exponent"===m?Z:(0===k?(y[0]=0,y[1]=p?"":t[x][i?"bits":"bytes"][Z]):(w=k/(2===e?Math.pow(2,10*Z):Math.pow(1e3,Z)),i&&o<=(w*=8)&&Z<8&&(w/=o,Z++),y[0]=Number(w.toFixed(0<Z?f:0)),y[0]===o&&Z<8&&void 0===v.exponent&&(y[0]=1,Z++),y[1]=10===e&&1===Z?i?"kb":"kB":t[x][i?"bits":"bytes"][Z],p&&(y[1]="jedec"===x?y[1].charAt(0):0<Z?y[1].replace(/B$/,""):y[1],r.test(y[1])&&(y[0]=Math.floor(y[0]),y[1]=""))),d&&(y[0]=-y[0]),y[1]=g[y[1]]||y[1],!0===s?y[0]=y[0].toLocaleString():0<s.length?y[0]=y[0].toLocaleString(s,c):0<b.length&&(y[0]=y[0].toString().replace(".",b)),"array"===m?y:(l&&(y[1]=u[Z]?u[Z]:a[x][Z]+(i?"bit":"byte")+(1===y[0]?"":"s")),"object"===m?{value:y[0],symbol:y[1],exponent:Z}:y.join(h)))}i.partial=function(n){return function(e){return i(e,n)}},n.exports=i}("undefined"!=typeof window?window:r.g)}}]);