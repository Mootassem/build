"use strict";(self.webpackChunkapp_frontend=self.webpackChunkapp_frontend||[]).push([[1881],{8774:function(n,e,t){var i=t(76747),r=t(86495),a=t(26319),s=t(71945),o=(0,i.P1)([r.Z.selectCurrentTenant,r.Z.selectCurrentUser],(function(n,e){return new a.Z(n,e).match(s.Z.values.attributesRead)})),c=(0,i.P1)([r.Z.selectCurrentTenant,r.Z.selectCurrentUser],(function(n,e){return new a.Z(n,e).match(s.Z.values.attributesEdit)})),d=(0,i.P1)([r.Z.selectCurrentTenant,r.Z.selectCurrentUser],(function(n,e){return new a.Z(n,e).match(s.Z.values.attributesCreate)})),l=(0,i.P1)([r.Z.selectCurrentTenant,r.Z.selectCurrentUser],(function(n,e){return new a.Z(n,e).match(s.Z.values.attributesImport)})),u={selectPermissionToRead:o,selectPermissionToEdit:c,selectPermissionToCreate:d,selectPermissionToDestroy:(0,i.P1)([r.Z.selectCurrentTenant,r.Z.selectCurrentUser],(function(n,e){return new a.Z(n,e).match(s.Z.values.attributesDestroy)})),selectPermissionToImport:l};e.Z=u},56616:function(n,e,t){var i=t(1413),r=t(70885),a=t(47313),s=t(43270),o=t(10499),c=t(89994),d=t(95748),l=t(68160),u=t(42277),m=t(67357),p=t(47575),f=t(75454),b=t(64211),g=t(21538),v=t(46417),h=u.Ry().shape({name:c.Z.string((0,o.ag)("entities.attributeOptions.fields.name"),{required:!0}),price:c.Z.decimal((0,o.ag)("entities.attributeOptions.fields.price"),{required:!0}),stock:c.Z.integer((0,o.ag)("entities.attributeOptions.fields.stock"),{required:!0}),attributeId:c.Z.relationToOne((0,o.ag)("entities.attributeOptions.fields.attributeId"),{required:!0}),itemId:c.Z.relationToOne((0,o.ag)("entities.attributes.fields.itemId"),{})});e.Z=function(n){var e,t=n.itemId,c=(0,a.useState)((function(){var e=n.record||{};return{name:e.name,price:e.price,stock:e.stock,attributeId:e.attributeId,itemId:t||e.itemId}})),u=(0,r.Z)(c,1)[0],Z=(0,s.cI)({resolver:(0,m.X)(h),mode:"all",defaultValues:u}),x=function(e){var r;if(null!==(r=n.record)&&void 0!==r&&r.id){var a;n.onSubmit(null===(a=n.record)||void 0===a?void 0:a.id,e)}else{var s,o=(0,i.Z)((0,i.Z)({},e),{},{itemId:t});n.onSubmit(null===(s=n.record)||void 0===s?void 0:s.id,o)}};return(0,v.jsx)(l.Z,{children:(0,v.jsx)(s.RV,(0,i.Z)((0,i.Z)({},Z),{},{children:(0,v.jsxs)("form",{onSubmit:Z.handleSubmit(x),children:[(0,v.jsxs)("div",{className:"row",children:[(0,v.jsx)("div",{className:"col-lg-7 col-md-8 col-12",children:(0,v.jsx)(b.Z,{name:"attributeId",label:(0,o.ag)("entities.attributeOptions.fields.attributeId"),required:!0,showCreate:!n.modal})}),(0,v.jsx)("div",{className:"col-lg-7 col-md-8 col-12",children:(0,v.jsx)(p.Z,{name:"name",label:(0,o.ag)("entities.attributeOptions.fields.name"),required:!0,autoFocus:!0})}),(null===(e=n.record)||void 0===e?void 0:e.id)&&(0,v.jsx)("div",{className:"col-lg-7 col-md-8 col-12",children:(0,v.jsx)(f.Z,{name:"itemId",label:(0,o.ag)("entities.attributes.fields.itemId"),required:!1,showCreate:!n.modal})}),(0,v.jsx)("div",{className:"col-lg-7 col-md-8 col-12",children:(0,v.jsx)(g.Z,{name:"stock",label:(0,o.ag)("entities.attributeOptions.fields.stock"),required:!0})}),(0,v.jsx)("div",{className:"col-lg-7 col-md-8 col-12",children:(0,v.jsx)(p.Z,{name:"price",label:(0,o.ag)("entities.attributeOptions.fields.price"),required:!0})})]}),(0,v.jsxs)("div",{className:"form-buttons",children:[(0,v.jsxs)("button",{className:"btn btn-primary",disabled:n.saveLoading,type:"button",onClick:Z.handleSubmit(x),children:[(0,v.jsx)(d.Z,{loading:n.saveLoading,iconClass:"far fa-save"}),"\xa0",(0,o.ag)("common.save")]}),(0,v.jsxs)("button",{className:"btn btn-light",type:"button",disabled:n.saveLoading,onClick:function(){Object.keys(u).forEach((function(n){Z.setValue(n,u[n])}))},children:[(0,v.jsx)("i",{className:"fas fa-undo"}),"\xa0",(0,o.ag)("common.reset")]}),n.onCancel?(0,v.jsxs)("button",{className:"btn btn-light",type:"button",disabled:n.saveLoading,onClick:function(){return n.onCancel()},children:[(0,v.jsx)("i",{className:"fas fa-times"}),"\xa0",(0,o.ag)("common.cancel")]}):null]})]})}))})}},60724:function(n,e,t){t.r(e),t.d(e,{default:function(){return x}});var i=t(70885),r=t(47313),a=t(45788),s=t(63830),o=t(10499),c=t(73579),d=t(76747),l=function(n){return n.attributeOptions.form},u=(0,d.P1)([l],(function(n){return n.record})),m={selectInitLoading:(0,d.P1)([l],(function(n){return Boolean(n.initLoading)})),selectSaveLoading:(0,d.P1)([l],(function(n){return Boolean(n.saveLoading)})),selectRecord:u,selectRaw:l},p=t(59436),f=t(56616),b=t(27829),g=t(53852),v=t(61567),h=t(75352),Z=t(46417);var x=function(n){var e,t=(0,r.useState)(!1),d=(0,i.Z)(t,2),l=d[0],u=d[1],x=(0,a.I0)(),j=(0,s.$B)(),y=null===(e=j.params)||void 0===e?void 0:e.name,C=(0,a.v9)(m.selectInitLoading),w=(0,a.v9)(m.selectSaveLoading),I=(0,a.v9)(m.selectRecord),N=Boolean(j.params.id),k=N?(0,o.ag)("entities.attributeOptions.edit.title"):(0,o.ag)("entities.attributeOptions.new.title");return(0,r.useEffect)((function(){x(c.Z.doInit(j.params.id)),u(!0)}),[x,j.params.id]),(0,Z.jsxs)(Z.Fragment,{children:[(0,Z.jsx)(g.Z,{items:[[(0,o.ag)("dashboard.menu"),"/"],[(0,o.ag)("entities.attributeOptions.menu"),"/attribute-options"],[k]]}),(0,Z.jsxs)(b.Z,{children:[(0,Z.jsx)(h.Z,{children:k}),C&&(0,Z.jsx)(v.Z,{}),l&&!C&&(0,Z.jsx)(f.Z,{saveLoading:w,initLoading:C,record:I,isEditing:N,onSubmit:function(n,e){x(N?c.Z.doUpdate(n,e):c.Z.doCreate(e))},onCancel:function(){return(0,p.s1)().push("/attribute-options")},itemId:y})]})]})}},64211:function(n,e,t){t.d(e,{Z:function(){return j}});var i=t(1413),r=t(42982),a=t(70885),s=t(47313),o=t(75433),c=t(15861),d=t(87757),l=t.n(d),u=t(1168),m=t(10499),p=t(33512),f=t(62719),b=t(46417);var g=function(n){var e=(0,s.useRef)(),t=(0,s.useState)(!1),i=(0,a.Z)(t,2),r=i[0],d=i[1];(0,s.useEffect)((function(){window.$(e.current).modal("show"),window.$(e.current).on("hidden.bs.modal",n.onClose)}),[]);var g=function(){var t=(0,c.Z)(l().mark((function t(i,r){var a,s,c;return l().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,d(!0),t.next=4,o.Z.create(r);case 4:return a=t.sent,s=a.id,t.next=8,o.Z.find(s);case 8:c=t.sent,window.$(e.current).modal("hide"),n.onSuccess(c),t.next=16;break;case 13:t.prev=13,t.t0=t.catch(0),p.Z.handle(t.t0);case 16:return t.prev=16,d(!1),t.finish(16);case 19:case"end":return t.stop()}}),t,null,[[0,13,16,19]])})));return function(n,e){return t.apply(this,arguments)}}();return u.createPortal((0,b.jsx)("div",{ref:e,className:"modal",tabIndex:-1,children:(0,b.jsx)("div",{className:"modal-dialog modal-lg",children:(0,b.jsxs)("div",{className:"modal-content",children:[(0,b.jsxs)("div",{className:"modal-header",children:[(0,b.jsx)("h5",{className:"modal-title",children:(0,m.ag)("entities.attributes.new.title")}),(0,b.jsx)("button",{type:"button",className:"close","data-dismiss":"modal",children:(0,b.jsx)("span",{children:"\xd7"})})]}),(0,b.jsx)("div",{className:"modal-body",children:(0,b.jsx)(f.Z,{saveLoading:r,onSubmit:g,onCancel:function(){window.$(e.current).modal("hide")},modal:!0})})]})})}),document.getElementById("modal-root"))},v=t(49513),h=t(43270),Z=t(45788),x=t(8774);var j=function(n){var e=(0,h.Gc)(),t=e.setValue,c=e.getValues,d=(0,s.useState)(!1),l=(0,a.Z)(d,2),u=l[0],m=l[1],p=(0,Z.v9)(x.Z.selectPermissionToCreate),f=function(){m(!1)};return(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(v.Z,(0,i.Z)((0,i.Z)({},n),{},{fetchFn:function(n,e){return o.Z.listAutocomplete(n,e)},mapper:{toAutocomplete:function(n){if(!n)return null;var e=n.id,t=n.label;return n.name&&(t=n.name),{key:e,value:e,label:t}},toValue:function(n){return n?{id:n.value,label:n.label}:null}},onOpenModal:function(){m(!0)},hasPermissionToCreate:p})),u&&(0,b.jsx)(g,{onClose:f,onSuccess:function(e){var i=n.name,a=n.mode;t(i,a&&"multiple"===a?[].concat((0,r.Z)(c()[i]||[]),[e]):e,{shouldValidate:!0,shouldDirty:!0}),f()}})]})}},27829:function(n,e,t){var i,r=t(30168),a=t(91876).ZP.div(i||(i=(0,r.Z)(["\n  margin-top: 16px;\n  padding: 24px;\n  background-color: white;\n  width: 100%;\n  border-radius: 5px;\n  border: 1px solid #dee2e6 !important;\n  .card-stats .card-body {\n    padding: 15px !important;\n  }\n  .text-center {\n    text-align: center !important;\n  }\n  .card-stats .icon-big.icon-danger, .card-stats .icon-big.icon-default, .card-stats .icon-big.icon-info, .card-stats .icon-big.icon-primary, .card-stats .icon-big.icon-secondary, .card-stats .icon-big.icon-success, .card-stats .icon-big.icon-warning {\n    border-radius: 5px;\n}\n.card-stats .icon-big.icon-danger i, .card-stats .icon-big.icon-default i, .card-stats .icon-big.icon-info i, .card-stats .icon-big.icon-primary i, .card-stats .icon-big.icon-secondary i, .card-stats .icon-big.icon-success i, .card-stats .icon-big.icon-warning i {\n  color: #fff!important;\n}\n  .pb-3,\n  .py-3 {\n    padding-bottom: 1rem !important;\n  }\n  .pt-3,\n  .py-3 {\n    padding-top: 1rem !important;\n  }\n  .d-inline-block {\n    display: inline-block !important;\n  }\n  .pl-3, .px-3 {\n    padding-left: 1rem !important;\n  }\n  .card-stats .icon-big {\n    width: 100%;\n    height: 100%;\n    font-size: 2.2em;\n    min-height: 64px;\n    display: flex;\n    align-items: center;\n    justify-content: center;\n  \n  }\n  .bubble-shadow-small {\n  position: relative; \n  }\n\n  .card-title {\n    margin: 0;\n    color: #575962;\n    font-size: 18px;\n    font-weight: 400;\n    line-height: 1.6;\n  }\n  .card-stats .icon-big.icon-primary {\n    background: #177dff;\n  .mt-3,\n  .my-3 {\n    margin-top: 1rem !important;\n  }\n  "])));e.Z=a},53852:function(n,e,t){var i,r=t(30168),a=(t(47313),t(28303)),s=t(91876),o=t(46417),c=s.ZP.nav(i||(i=(0,r.Z)(["\n  .breadcrumb {\n    font-size: 13px;\n    margin: 0px;\n    padding: 0px;\n    background-color: transparent;\n  }\n\n  .breadcrumb-item:not(.active) a {\n    color: rgba(0, 0, 0, 0.45);\n  }\n"])));e.Z=function(n){var e=function(n){return n.length>1};return(0,o.jsx)(c,{children:(0,o.jsx)("ol",{className:"breadcrumb",children:n.items.map((function(t,i){return(0,o.jsx)("li",{className:"breadcrumb-item ".concat(n.items.length-1===i?"active":""),children:e(t)?(0,o.jsx)(a.rU,{to:t[1],children:t[0]}):t[0]},t[0])}))})})}},95748:function(n,e,t){t(47313);var i=t(46417);e.Z=function(n){return n.loading?(0,i.jsx)("span",{className:"spinner-border spinner-border-sm"}):n.iconClass?(0,i.jsx)("i",{className:n.iconClass}):null}},61567:function(n,e,t){t(47313);var i=t(46417);e.Z=function(){return(0,i.jsx)("div",{style:{width:"100%",marginTop:"24px",marginBottom:"24px",display:"flex",justifyContent:"center",alignContent:"center",alignItems:"center"},children:(0,i.jsx)("div",{className:"spinner-border text-primary"})})}},75352:function(n,e,t){var i,r=t(30168),a=t(91876).ZP.h1(i||(i=(0,r.Z)(["\n  margin-bottom: 24px;\n"])));e.Z=a},71351:function(n,e,t){t.d(e,{Z:function(){return d}});var i="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto),r=new Uint8Array(16);function a(){if(!i)throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return i(r)}for(var s=[],o=0;o<256;++o)s[o]=(o+256).toString(16).substr(1);var c=function(n,e){var t=e||0,i=s;return[i[n[t++]],i[n[t++]],i[n[t++]],i[n[t++]],"-",i[n[t++]],i[n[t++]],"-",i[n[t++]],i[n[t++]],"-",i[n[t++]],i[n[t++]],"-",i[n[t++]],i[n[t++]],i[n[t++]],i[n[t++]],i[n[t++]],i[n[t++]]].join("")};var d=function(n,e,t){var i=e&&t||0;"string"==typeof n&&(e="binary"===n?new Array(16):null,n=null);var r=(n=n||{}).random||(n.rng||a)();if(r[6]=15&r[6]|64,r[8]=63&r[8]|128,e)for(var s=0;s<16;++s)e[i+s]=r[s];return e||c(r)}}}]);