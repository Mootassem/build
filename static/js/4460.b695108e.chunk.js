"use strict";(self.webpackChunkapp_frontend=self.webpackChunkapp_frontend||[]).push([[4460],{89994:function(n,e,t){var r=t(42982),i=t(42277),a=t(10499),l=t(70816),o=t.n(l),u={generic:function(n){return i.nK().label(n)},string:function(n,e){e=e||{};var t=i.Z_().transform((function(n,e){return""===e?null:n})).nullable(!0).trim().label(n);return e.required&&(t=t.required()),(e.min||0===e.min)&&(t=t.min(e.min)),e.max&&(t=t.max(e.max)),e.matches&&(t=t.matches(e.matches)),t},boolean:function(n,e){return i.Xg().default(!1).label(n)},relationToOne:function(n,e){e=e||{};var t=i.nK().nullable(!0).label(n).transform((function(n,e){return e?e.id:null}));return e.required&&(t=t.required()),t},stringArray:function(n,e){e=e||{};var t=i.IX().compact().ensure().of(i.Z_().transform((function(n,e){return""===e?null:n})).trim()).label(n);return(e.required||e.min)&&(t=t.required()),e.min||0===e.min?t=t.min(e.min):e.required&&(t=t.min(1)),e.max&&(t=t.max(e.max)),t},relationToMany:function(n,e){e=e||{};var t=i.IX().nullable(!0).label(n).transform((function(n,e){return e&&e.length?e.map((function(n){return n.id})):[]}));return(e.required||e.min)&&(t=t.required()),e.min||0===e.min?t=t.min(e.min):e.required&&(t=t.min(1)),e.max&&(t=t.max(e.max)),t},integer:function(n,e){e=e||{};var t=i.Rx().transform((function(n,e){return""===e?null:n})).integer().nullable(!0).label(n);return e.required&&(t=t.required()),(e.min||0===e.min)&&(t=t.min(e.min)),e.max&&(t=t.max(e.max)),t},images:function(n,e){e=e||{};var t=i.IX().nullable(!0).label(n);return(e.required||e.min)&&(t=t.required()),e.min||0===e.min?t=t.min(e.min):e.required&&(t=t.min(1)),e.max&&(t=t.max(e.max)),t},files:function(n,e){e=e||{};var t=i.IX().compact().ensure().nullable(!0).label(n);return(e.required||e.min)&&(t=t.required()),e.min||0===e.min?t=t.min(e.min):e.required&&(t=t.min(1)),e.max&&(t=t.max(e.max)),t},enumerator:function(n,e){e=e||{};var t=i.Z_().transform((function(n,e){return""===e?null:n})).label(n).nullable(!0).oneOf([null].concat((0,r.Z)(e.options||[])));return e.required&&(t=t.required((0,a.ag)("validation.string.selected"))),t},email:function(n,e){e=e||{};var t=i.Z_().transform((function(n,e){return""===e?null:n})).nullable(!0).trim().label(n).email();return e.required&&(t=t.required()),(e.min||0===e.min)&&(t=t.min(e.min)),e.max&&(t=t.max(e.max)),e.matches&&(t=t.matches(e.matches)),t},decimal:function(n,e){e=e||{};var t=i.Rx().transform((function(n,e){return""===e?null:n})).nullable(!0).label(n);return e.required&&(t=t.required()),(e.min||0===e.min)&&(t=t.min(e.min)),e.max&&(t=t.max(e.max)),t},datetime:function(n,e){e=e||{};var t=i.nK().nullable(!0).label(n).transform((function(n,e){return n?o()(e,"YYYY-MM-DD HH:mm").toISOString():null}));return e.required&&(t=t.required()),t},date:function(n,e){e=e||{};var t=i.nK().nullable(!0).label(n).test("is-date",(0,a.ag)("validation.mixed.default"),(function(n){return!n||o()(n,"YYYY-MM-DD").isValid()})).transform((function(n){return n?o()(n).format("YYYY-MM-DD"):null}));return e.required&&(t=t.required()),t}};e.Z=u},98040:function(n,e,t){var r=t(76747),i=function(n){return n.tenant.form},a=(0,r.P1)([i],(function(n){return n.record})),l={selectInitLoading:(0,r.P1)([i],(function(n){return Boolean(n.initLoading)})),selectSaveLoading:(0,r.P1)([i],(function(n){return Boolean(n.saveLoading)})),selectRecord:a,selectRaw:i};e.Z=l},44460:function(n,e,t){t.r(e),t.d(e,{default:function(){return R}});var r=t(70885),i=t(10499),a=t(926),l=t(86495),o=t(47313),u=t(45788),c=t(32377),s=t(37078),d=t(11581),m=t(94827),f=t(1413),h=t(43270),g=t(89994),v=t(51853),p=t(98040),b=t(47575),x=t(42277),Z=t(86430);var y=t(1354),j=t(67357),q=t(46417),C=x.Ry().shape({name:g.Z.string((0,i.ag)("tenant.fields.tenantName"),{required:!0,max:50}),url:g.Z.string((0,i.ag)("tenant.fields.tenantUrl"),{required:!0,max:50}).matches(/^[a-z0-9][-a-zA-Z0-9]*$/,(0,i.ag)("tenant.validation.url"))}),w=x.Ry().shape({name:g.Z.string((0,i.ag)("tenant.fields.tenantName"),{required:!0,max:50})}),k=y.w.isEnabled?C:w;var N=function(n){var e=(0,u.I0)(),t=(0,o.useState)({name:""}),a=(0,r.Z)(t,1)[0],c=(0,h.cI)({resolver:(0,j.X)(k),mode:"onSubmit",defaultValues:a}),s=(0,u.v9)(p.Z.selectSaveLoading),d=(0,u.v9)(l.Z.selectInvitedTenants);return(0,q.jsx)(h.RV,(0,f.Z)((0,f.Z)({},c),{},{children:(0,q.jsxs)("form",{onSubmit:c.handleSubmit((function(n){e(v.Z.doCreate(n))})),children:[(0,q.jsx)(b.Z,{name:"name",label:(0,i.ag)("tenant.fields.tenantName"),autoComplete:"name",onChange:function(n){c.setValue("url",n.toString().normalize("NFD").replace(/[\u0300-\u036f]/g,"").toLowerCase().trim().replace(/\s+/g,"-").replace(/[^\w-]+/g,"").replace(/--+/g,"-"))},autoFocus:!0}),y.w.isEnabled&&(0,q.jsx)(b.Z,{name:"url",placeholder:(0,i.ag)("tenant.fields.tenantUrl"),endAdornment:".".concat(Z.Z.frontendUrl.host)}),(0,q.jsx)("button",{style:{marginTop:"16px"},type:"submit",className:"btn btn-primary btn-block",disabled:s,children:(0,i.ag)("tenant.create.button")}),Boolean(d.length)&&(0,q.jsx)("button",{style:{marginTop:"16px"},type:"button",className:"btn btn-light btn-block",onClick:n.onViewToggle,children:(0,i.ag)("tenant.invitation.view")})]})}))},S=t(28769),I=t(10546),B=t(5544),M=x.Ry().shape({id:g.Z.string((0,i.ag)("tenant.fields.tenantId"))});var V=function(n){var e=(0,u.I0)(),t=(0,u.v9)(I.Z.selectLoading),a=(0,u.v9)(l.Z.selectInvitedTenants),c=(0,u.v9)(l.Z.selectCurrentUser),s=(0,o.useState)({id:a[0].id}),d=(0,r.Z)(s,1)[0],m=(0,h.cI)({resolver:(0,j.X)(M),mode:"onSubmit",defaultValues:d});return(0,q.jsx)(h.RV,(0,f.Z)((0,f.Z)({},m),{},{children:(0,q.jsxs)("form",{onSubmit:m.handleSubmit((function(n){var t=n.id,r=c.tenants.find((function(n){return n.tenant.id===t}));e(S.Z.doAccept(r.invitationToken))})),children:[(0,q.jsx)(B.Z,{name:"id",label:(0,i.ag)("tenant.fields.tenantId"),options:a.map((function(n){return{value:n.id,label:n.name}}))}),(0,q.jsx)("button",{style:{marginTop:"16px"},type:"submit",className:"btn btn-primary btn-block",disabled:t,children:(0,i.ag)("tenant.invitation.accept")}),(0,q.jsx)("button",{style:{marginTop:"16px"},type:"button",className:"btn btn-light btn-block",onClick:n.onViewToggle,children:(0,i.ag)("tenant.new.title")})]})}))};var R=function(){var n=(0,o.useState)("form"),e=(0,r.Z)(n,2),t=e[0],f=e[1],h=(0,u.I0)(),g=(0,u.v9)(l.Z.selectInvitedTenants),v=(0,u.v9)(l.Z.selectBackgroundImageUrl),p=(0,u.v9)(l.Z.selectLogoUrl);(0,o.useEffect)((function(){f(g.length?"select":"form")}),[g]);var b=function(){f((function(n){return"form"===n?"select":"form"}))};return(0,q.jsx)(m.Z,{style:{backgroundImage:"url(".concat(v||"/images/tenant.jpg",")")},children:(0,q.jsxs)(c.Z,{children:[(0,q.jsx)(s.Z,{children:p?(0,q.jsx)("img",{src:p,width:"240px",alt:(0,i.ag)("app.title")}):(0,q.jsx)("h1",{children:(0,i.ag)("app.title")})}),"form"===t?(0,q.jsx)(N,{onViewToggle:b}):(0,q.jsx)(V,{onViewToggle:b}),(0,q.jsx)(d.Z,{children:(0,q.jsx)("button",{className:"btn btn-sm btn-link",type:"button",onClick:function(){h(a.Z.doSignout())},children:(0,i.ag)("auth.signout")})})]})})}},32377:function(n,e,t){var r,i=t(30168),a=t(91876).ZP.div(r||(r=(0,i.Z)(["\n  width: 500px;\n  height: 100%;\n  min-height: 100%;\n  overflow-y: auto;\n  z-index: 1;\n  position: relative;\n  display: flex;\n  flex-direction: column;\n  padding: 56px 40px;\n  position: relative;\n  background-color: rgba(0, 0, 0, 0.8);\n  color: white;\n\n  h1,\n  h2,\n  h3,\n  h4,\n  h5,\n  h6 {\n    color: white;\n  }\n\n  h4 {\n    font-size: 1.25em;\n  }\n\n  a,\n  a:hover {\n    color: white;\n  }\n\n  .btn-link,\n  .btn-link:hover {\n    color: white;\n  }\n\n  .invalid-feedback {\n    display: block;\n  }\n\n  @media only screen and (max-width: 767px) {\n    width: 100%;\n  }\n"])));e.Z=a},37078:function(n,e,t){var r,i=t(30168),a=t(91876).ZP.div(r||(r=(0,i.Z)(["\n  width: 100%;\n  display: flex;\n  flex-direction: column;\n  margin-bottom: 48px;\n  justify-content: center;\n  align-items: center;\n  flex-shrink: 0;\n  color: white;\n\n  h1 {\n    margin-bottom: 0;\n  }\n"])));e.Z=a},11581:function(n,e,t){var r,i=t(30168),a=t(91876).ZP.div(r||(r=(0,i.Z)(["\n  margin-top: 24px;\n  text-align: center;\n"])));e.Z=a},94827:function(n,e,t){var r,i=t(30168),a=t(91876).ZP.div(r||(r=(0,i.Z)(["\n  width: 100%;\n  min-height: 100vh;\n  height: 100vh;\n  display: flex;\n  justify-content: flex-end;\n  align-items: center;\n  position: relative;\n  background-size: cover;\n\n  &:before {\n    content: '';\n    width: 100%;\n    height: 100%;\n    display: flex;\n    background-color: rgba(0, 0, 0, 0.5);\n    position: absolute;\n    z-index: 1;\n    top: 0;\n  }\n"])));e.Z=a},49384:function(n,e,t){t.d(e,{Z:function(){return a}});var r=t(15671),i=t(43144),a=function(){function n(){(0,r.Z)(this,n)}return(0,i.Z)(n,null,[{key:"errorMessage",value:function(n,e,t,r){var i,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null;if(a)return a;if(!r&&!t[n])return null;var l=e[n];return(null===l||void 0===l||null===(i=l[0])||void 0===i?void 0:i.message)||(null===l||void 0===l?void 0:l.message)||l||null}}]),n}()},47575:function(n,e,t){t(47313);var r=t(43270),i=t(49384),a=t(46417);function l(n){var e=n.label,t=n.description,l=n.name,o=n.hint,u=n.type,c=n.placeholder,s=n.autoFocus,d=n.autoComplete,m=n.required,f=n.externalErrorMessage,h=n.disabled,g=n.endAdornment,v=(0,r.Gc)(),p=v.register,b=v.errors,x=v.formState,Z=x.touched,y=x.isSubmitted,j=i.Z.errorMessage(l,b,Z,y,f);return(0,a.jsxs)("div",{className:"form-group",children:[(0,a.jsxs)("div",{className:g?"input-group":"",children:[Boolean(e)&&(0,a.jsx)("label",{className:"col-form-label ".concat(m?"required":null),htmlFor:l,children:e}),t,(0,a.jsx)("input",{id:l,name:l,type:u,ref:p,onChange:function(e){n.onChange&&n.onChange(e.target.value)},onBlur:function(e){n.onBlur&&n.onBlur(e)},placeholder:c||void 0,autoFocus:s||void 0,autoComplete:d||void 0,disabled:h,className:"form-control ".concat(j?"is-invalid":"")}),g&&(0,a.jsx)("div",{className:"input-group-append",children:(0,a.jsx)("span",{className:"input-group-text",children:g})})]}),(0,a.jsx)("div",{className:"invalid-feedback",children:j}),Boolean(o)&&(0,a.jsx)("small",{className:"form-text text-muted",children:o})]})}l.defaultProps={type:"text",required:!1},e.Z=l},5544:function(n,e,t){var r=t(1413),i=t(47313),a=t(73622),l=t(10499),o=t(43270),u=t(49384),c=t(46417);function s(n){var e=n.label,t=n.name,s=n.hint,d=n.options,m=n.required,f=n.mode,h=n.placeholder,g=n.isClearable,v=n.externalErrorMessage,p=(0,o.Gc)(),b=p.register,x=p.errors,Z=p.formState,y=Z.touched,j=Z.isSubmitted,q=p.setValue,C=p.watch,w=u.Z.errorMessage(t,x,y,j,v),k=C(t);(0,i.useEffect)((function(){b({name:t})}),[b,t]);var N=function(){return k?k.map((function(n){return d.find((function(e){return e.value===n}))})):[]},S=function(){var e=n.options;return null!=k?e.find((function(n){return n.value===k})):null},I=function(e){if(!e)return q(t,[],{shouldValidate:!0,shouldDirty:!0}),void(n.onChange&&n.onChange([]));var r=e.map((function(n){return n?n.value:n})).filter((function(n){return null!=n}));q(t,r,{shouldValidate:!0,shouldDirty:!0}),n.onChange&&n.onChange(r)},B=function(e){if(!e)return q(t,null,{shouldValidate:!0,shouldDirty:!0}),void(n.onChange&&n.onChange(null));q(t,e.value,{shouldValidate:!0,shouldDirty:!0}),n.onChange&&n.onChange(e.value)},M=Boolean(w)?{container:function(n){return(0,r.Z)((0,r.Z)({},n),{},{color:"hsl(0,0%,20%)"})},control:function(n){return(0,r.Z)((0,r.Z)({},n),{},{borderColor:"red"})}}:{container:function(n){return(0,r.Z)((0,r.Z)({},n),{},{color:"hsl(0,0%,20%)"})}};return(0,c.jsxs)("div",{className:"form-group",children:[Boolean(e)&&(0,c.jsx)("label",{className:"col-form-label ".concat(m?"required":null),children:e}),(0,c.jsx)("br",{}),(0,c.jsx)(a.ZP,{className:"w-100",value:"multiple"===n.mode?N():S(),onChange:function(e){return"multiple"===n.mode?I(e):B(e)},onBlur:function(e){n.onBlur&&n.onBlur(e)},id:t,name:t,options:d,isMulti:"multiple"===f,placeholder:h||"",isClearable:g,styles:M,loadingMessage:function(){return(0,l.ag)("autocomplete.loading")},noOptionsMessage:function(){return(0,l.ag)("autocomplete.noOptions")}}),(0,c.jsx)("div",{className:"invalid-feedback",children:w}),Boolean(s)&&(0,c.jsx)("small",{className:"form-text text-muted",children:s})]})}s.defaultProps={required:!1,isClearable:!0},e.Z=s},73622:function(n,e,t){var r=t(15671),i=t(43144),a=t(60136),l=t(82963),o=t(61120),u=t(47313),c=t(16912),s=t(46383),d=(t(1168),t(82423)),m=(t(96312),t(71902),t(87201)),f=t(70342);function h(n){var e=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(n){return!1}}();return function(){var t,r=(0,o.Z)(n);if(e){var i=(0,o.Z)(this).constructor;t=Reflect.construct(r,arguments,i)}else t=r.apply(this,arguments);return(0,l.Z)(this,t)}}u.Component;var g=(0,m.m)(d.S);e.ZP=g}}]);