(self.webpackChunkapp_frontend=self.webpackChunkapp_frontend||[]).push([[7596],{67617:function(e,n,t){"use strict";var r=t(76747),s=t(86495),a=t(26319),o=t(71945),i=(0,r.P1)([s.Z.selectCurrentTenant,s.Z.selectCurrentUser],(function(e,n){return new a.Z(e,n).match(o.Z.values.taxesRead)})),u=(0,r.P1)([s.Z.selectCurrentTenant,s.Z.selectCurrentUser],(function(e,n){return new a.Z(e,n).match(o.Z.values.taxesEdit)})),c=(0,r.P1)([s.Z.selectCurrentTenant,s.Z.selectCurrentUser],(function(e,n){return new a.Z(e,n).match(o.Z.values.taxesCreate)})),l=(0,r.P1)([s.Z.selectCurrentTenant,s.Z.selectCurrentUser],(function(e,n){return new a.Z(e,n).match(o.Z.values.taxesImport)})),d={selectPermissionToRead:i,selectPermissionToEdit:u,selectPermissionToCreate:c,selectPermissionToDestroy:(0,r.P1)([s.Z.selectCurrentTenant,s.Z.selectCurrentUser],(function(e,n){return new a.Z(e,n).match(o.Z.values.taxesDestroy)})),selectPermissionToImport:l};n.Z=d},52766:function(e,n,t){"use strict";t.d(n,{Z:function(){return j}});var r=t(1413),s=t(42982),a=t(70885),o=t(47313),i=t(42844),u=t(15861),c=t(87757),l=t.n(c),d=t(1168),f=t(10499),m=t(33512),v=t(67515),h=t(46417);var x=function(e){var n=(0,o.useRef)(),t=(0,o.useState)(!1),r=(0,a.Z)(t,2),s=r[0],c=r[1];(0,o.useEffect)((function(){window.$(n.current).modal("show"),window.$(n.current).on("hidden.bs.modal",e.onClose)}),[]);var x=function(){var t=(0,u.Z)(l().mark((function t(r,s){var a,o,u;return l().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,c(!0),t.next=4,i.Z.create(s);case 4:return a=t.sent,o=a.id,t.next=8,i.Z.find(o);case 8:u=t.sent,window.$(n.current).modal("hide"),e.onSuccess(u),t.next=16;break;case 13:t.prev=13,t.t0=t.catch(0),m.Z.handle(t.t0);case 16:return t.prev=16,c(!1),t.finish(16);case 19:case"end":return t.stop()}}),t,null,[[0,13,16,19]])})));return function(e,n){return t.apply(this,arguments)}}();return d.createPortal((0,h.jsx)("div",{ref:n,className:"modal",tabIndex:-1,children:(0,h.jsx)("div",{className:"modal-dialog modal-lg",children:(0,h.jsxs)("div",{className:"modal-content",children:[(0,h.jsxs)("div",{className:"modal-header",children:[(0,h.jsx)("h5",{className:"modal-title",children:(0,f.ag)("entities.taxes.new.title")}),(0,h.jsx)("button",{type:"button",className:"close","data-dismiss":"modal",children:(0,h.jsx)("span",{children:"\xd7"})})]}),(0,h.jsx)("div",{className:"modal-body",children:(0,h.jsx)(v.Z,{saveLoading:s,onSubmit:x,onCancel:function(){window.$(n.current).modal("hide")},modal:!0})})]})})}),document.getElementById("modal-root"))},p=t(49513),Z=t(43270),b=t(45788),g=t(67617);var j=function(e){var n=(0,Z.Gc)(),t=n.setValue,u=n.getValues,c=(0,o.useState)(!1),l=(0,a.Z)(c,2),d=l[0],f=l[1],m=(0,b.v9)(g.Z.selectPermissionToCreate),v=function(){f(!1)};return(0,h.jsxs)(h.Fragment,{children:[(0,h.jsx)(p.Z,(0,r.Z)((0,r.Z)({},e),{},{fetchFn:function(e,n){return i.Z.listAutocomplete(e,n)},mapper:{toAutocomplete:function(e){if(!e)return null;var n=e.id,t=e.label;return e.name&&(t=e.name),{key:n,value:n,label:t}},toValue:function(e){return e?{id:e.value,label:e.label}:null}},onOpenModal:function(){f(!0)},hasPermissionToCreate:m})),d&&(0,h.jsx)(x,{onClose:v,onSuccess:function(n){var r=e.name,a=e.mode;t(r,a&&"multiple"===a?[].concat((0,s.Z)(u()[r]||[]),[n]):n,{shouldValidate:!0,shouldDirty:!0}),v()}})]})}},67515:function(e,n,t){"use strict";var r=t(1413),s=t(70885),a=t(47313),o=t(43270),i=t(10499),u=t(89994),c=t(95748),l=t(68160),d=t(42277),f=t(67357),m=t(47575),v=t(45663),h=t(46417),x=d.Ry().shape({name:u.Z.string((0,i.ag)("entities.taxes.fields.name"),{required:!0}),value:u.Z.decimal((0,i.ag)("entities.taxes.fields.value"),{required:!0}),status:u.Z.enumerator((0,i.ag)("entities.taxes.fields.status"),{options:v.Z.status})});n.Z=function(e){var n=(0,a.useState)((function(){var n=e.record||{};return{name:n.name,value:n.value}})),t=(0,s.Z)(n,1)[0],u=(0,o.cI)({resolver:(0,f.X)(x),mode:"all",defaultValues:t}),d=function(n){var t;e.onSubmit(null===(t=e.record)||void 0===t?void 0:t.id,n)};return(0,h.jsx)(l.Z,{children:(0,h.jsx)(o.RV,(0,r.Z)((0,r.Z)({},u),{},{children:(0,h.jsxs)("form",{onSubmit:u.handleSubmit(d),children:[(0,h.jsxs)("div",{className:"row",children:[(0,h.jsx)("div",{className:"col-lg-7 col-md-8 col-12",children:(0,h.jsx)(m.Z,{name:"name",label:(0,i.ag)("entities.taxes.fields.name"),required:!0,autoFocus:!0})}),(0,h.jsx)("div",{className:"col-lg-7 col-md-8 col-12",children:(0,h.jsx)(m.Z,{name:"value",label:(0,i.ag)("entities.taxes.fields.value"),required:!0,description:"(Set 0 to make it free)"})})]}),(0,h.jsxs)("div",{className:"form-buttons",children:[(0,h.jsxs)("button",{className:"btn btn-primary",disabled:e.saveLoading,type:"button",onClick:u.handleSubmit(d),children:[(0,h.jsx)(c.Z,{loading:e.saveLoading,iconClass:"far fa-save"}),"\xa0",(0,i.ag)("common.save")]}),(0,h.jsxs)("button",{className:"btn btn-light",type:"button",disabled:e.saveLoading,onClick:function(){Object.keys(t).forEach((function(e){u.setValue(e,t[e])}))},children:[(0,h.jsx)("i",{className:"fas fa-undo"}),"\xa0",(0,i.ag)("common.reset")]}),e.onCancel?(0,h.jsxs)("button",{className:"btn btn-light",type:"button",disabled:e.saveLoading,onClick:function(){return e.onCancel()},children:[(0,h.jsx)("i",{className:"fas fa-times"}),"\xa0",(0,i.ag)("common.cancel")]}):null]})]})}))})}},34405:function(e,n,t){var r=t(99038);e.exports=function(e,n){return!!(null==e?0:e.length)&&r(e,n,0)>-1}},86722:function(e){e.exports=function(e,n,t){for(var r=-1,s=null==e?0:e.length;++r<s;)if(t(n,e[r]))return!0;return!1}},93527:function(e){e.exports=function(e,n,t,r){for(var s=e.length,a=t+(r?1:-1);r?a--:++a<s;)if(n(e[a],a,e))return a;return-1}},99038:function(e,n,t){var r=t(93527),s=t(57700),a=t(13245);e.exports=function(e,n,t){return n===n?a(e,n,t):r(e,s,t)}},57700:function(e){e.exports=function(e){return e!==e}},7579:function(e,n,t){var r=t(44526),s=t(34405),a=t(86722),o=t(88905),i=t(56946),u=t(73671);e.exports=function(e,n,t){var c=-1,l=s,d=e.length,f=!0,m=[],v=m;if(t)f=!1,l=a;else if(d>=200){var h=n?null:i(e);if(h)return u(h);f=!1,l=o,v=new r}else v=n?[]:m;e:for(;++c<d;){var x=e[c],p=n?n(x):x;if(x=t||0!==x?x:0,f&&p===p){for(var Z=v.length;Z--;)if(v[Z]===p)continue e;n&&v.push(p),m.push(x)}else l(v,p,t)||(v!==m&&v.push(p),m.push(x))}return m}},56946:function(e,n,t){var r=t(4199),s=t(8568),a=t(73671),o=r&&1/a(new r([,-0]))[1]==1/0?function(e){return new r(e)}:s;e.exports=o},13245:function(e){e.exports=function(e,n,t){for(var r=t-1,s=e.length;++r<s;)if(e[r]===n)return r;return-1}},8568:function(e){e.exports=function(){}},35487:function(e,n,t){var r=t(81186),s=t(7579);e.exports=function(e,n){return e&&e.length?s(e,r(n,2)):[]}},73622:function(e,n,t){"use strict";var r=t(15671),s=t(43144),a=t(60136),o=t(82963),i=t(61120),u=t(47313),c=t(16912),l=t(46383),d=(t(1168),t(82423)),f=(t(96312),t(71902),t(87201)),m=t(70342);function v(e){var n=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var t,r=(0,i.Z)(e);if(n){var s=(0,i.Z)(this).constructor;t=Reflect.construct(r,arguments,s)}else t=r.apply(this,arguments);return(0,o.Z)(this,t)}}u.Component;var h=(0,f.m)(d.S);n.ZP=h}}]);